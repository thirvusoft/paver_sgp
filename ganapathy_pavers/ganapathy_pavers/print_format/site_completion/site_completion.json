{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-02-14 19:12:42.354736",
 "css": "\n.table, th, td {\n  border: 1px solid black;\n\n}\n.td {\n  padding: 5px;\n  border: 1px solid black;\n  text-align: left;    \n}\n",
 "custom_format": 1,
 "default_print_language": "en-US",
 "disabled": 0,
 "doc_type": "Project",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "{% set other_work=[] %}\n<html>\n<head>\n\n<!--<div class=\"ex1\">-->\n<table style=\"width:100%;\">\n    <tr>\n         <td  colspan=\"2\" align=\"center\" style=\"background-color: #D6EEEE;\"><b>{{ (doc.type or \"\").upper() }} - SITE COMPLETION REPORT </b><br></td>\n    </tr>\n     \n     <tr>\n         <td colspan=\"2\" style=\"border-bottom:1px solid ;\" align=\"center\"><b>{{doc.name}}</b><br></td>\n    </tr>\n \n      </table>\n      <div><br></div>\n      <div>\n          <table  style=\"width:100%\">\n            <tr>\n                <td style=\"width:50%\"><b>DATE: </b>{{ frappe.utils.formatdate(doc.completion_date) }}</td>\n                <td style=\"width:50%\"><b>ORDER SHEET NO: </b> \n                    {% set order_no = [] %}\n                    {% if doc.type==\"Compound Wall\" %}\n                        {% for i in doc.item_details_compound_wall %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                                <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                     {% set order_no = [] %}\n                    {% if doc.type==\"Pavers\" %}\n                        {% for i in doc.item_details %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                               <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                </td>\n           </tr>\n           <tr>\n             <td style=\"width:50%\"><b>RATE:{% if doc.type==\"Compound Wall\" %}\n              {% set a=[] %}\n                            {% for i in doc.item_details_compound_wall %} \n                           {% set _=a.append(i.rate or 0) %} {% endfor %}\n                           {% if (a|length)>0 %}\n                            {{\"%.2f\"|format((a|sum) /(a|length))}}\n                            {% endif %}\n                            {% endif %}\n                             {% if doc.type==\"Pavers\" %}\n                             {% set a=[] %}\n                            {% for i in doc.item_details %}{% set _=a.append(i.rate or 0) %} {% endfor %}\n                            {% if (a|length)>0 %}\n                                {{\"%.2f\"|format((a|sum) /(a|length))}} \n                            {% endif %}\n                            {% endif %}</b></td>\n              \n             <td style=\"width:50%\"><b>SITE SUPERVISOR: {{doc.supervisor_name}} </b></td>\n            \n          </tr>\n  <tr>\n   <td style=\"width:50%\"><b>LAYER NAME: {% set a=[] %}\n    {% for name in doc.job_worker|unique(attribute='employee_name') %}\n        {% if (a|len > 0) %}\n            {{\", \"}}\n        {% endif %}\n        {{ name.employee_name or \"\"}}\n        {% set _=a.append(name.employee_name) %}\n    {% endfor %}\n</b></td>\n     <td style=\"width:50%\"><b>LAYER RATE: {% if doc.job_worker %}\n        {% set a=[] %}\n            {% for i in doc.job_worker %}\n                {% if (i.rate or 0) not in a %}\n                    {% if (a|len > 0) %} {{\", \"}} {% endif %}\n                    {{ \"%.2f\"%(i.rate or 0) }}\n                    {% set _=a.append(i.rate or 0) %}\n                {% endif %}\n            {% endfor %}\n        {% endif %}\n    </b></td>\n  </tr>\n  </table>\n      </div>\n       <div><br></div>\n       <div>\n          <table  style=\"width:100%\"><tr>\n             <td><b>DESIGN:</b></td>\n    <td>   {% if doc.type==\"Compound Wall\" %}\n                    {% for name in doc.item_details_compound_wall|unique(attribute='item') %} {{name.item or \"\"}}, {% endfor %}\n                    {% endif %}\n                     {% if doc.type==\"Pavers\" %}\n                   {% for name in doc.item_details|unique(attribute='item') %}  {{name.item or \"\"}}, {% endfor %}\n                    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>SUPPLIED SQFT</b></td>\n    <td> {% if doc.delivery_detail %}\n     {% set a=[] %}\n                    {% for i in doc.delivery_detail %} {% set _=a.append((i.delivered_stock_qty or 0)+(i.returned_stock_qty or 0)) %} {% endfor %}\n                    {{\"%.2f\"|format((a|sum) )}}\n                    {% endif %} </td>\n  </tr><tr>\n   <td><b>COMPLETED AREA IN SQFT</b></td>\n    <td> {{doc.measurement_sqft}} </td>\n  </tr>\n  <tr>\n    <td><b>MATERIAL SUPPLY IF ANY</b></td>\n    <td>{% if doc.material_supply ==1 %}\n    YES\n    {% endif %}\n    {% if doc.material_supply ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n    <tr>\n    <td><b>WORK COMPLETD</b></td>\n    <td>{% if doc.work_completed ==1 %}\n    YES\n    {% endif %}\n    {% if doc.work_completed ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>CUTTING PIECE</b></td>\n    <td>{% if doc.cutting_piece ==1 %}\n    YES\n    {% endif %}\n    {% if doc.cutting_piece ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n    {% if doc.type!=\"Compound Wall\" %}\n        <tr>\n        <td><b>DUST SEWING</b></td>\n        <td>{% if doc.dust_swing ==1 %}\n        YES\n        {% endif %}\n        {% if doc.dust_swing ==0 %}\n        NO\n        {% endif %}</td>\n      </tr>\n  {% endif %}\n  {% if doc.type!=\"Compound Wall\" %}\n      <tr>\n        <td><b>DUST FINISHING WITH EARTH RAMMER</b></td>\n        <td>{% if doc.dust_finishing_with_rammer ==1 %}\n        YES\n        {% endif %}\n        {% if doc.dust_finishing_with_rammer ==0 %}\n        NO\n        {% endif %}</td>\n      </tr>\n  {% endif %}\n  {% if doc.type!=\"Compound Wall\" %}\n    <tr>\n    <td><b>DUST SWEEPING</b></td>\n    <td>{% if doc.dust_sweeping ==1 %}\n    YES\n    {% endif %}\n    {% if doc.dust_sweeping ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  {% endif %}\n    <tr>\n    <td><b>ANY FOOD EXP IN SITE</b></td>\n    <td>{% if doc.any_food_exp_in_site ==1 %}\n    YES\n    {% endif %}\n    {% if doc.any_food_exp_in_site ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>OTHER LABOUR WORK IF ANY</b></td>\n    <td> \n    {% set other_work=[] %}\n    {% for i in doc.job_worker %} \n        {% if (i.other_work) %}\n            {% set _=other_work.append(i) %}\n        {% endif %}\n    {% endfor %}\n\n                    {% if ((other_work|len)>0) %}\n                    YES\n                   {% else %}\n                NO\n                    {% endif %}</td>\n  </tr>  <tr>\n    <td><b>SITE ADVANCE</b></td>\n    <td> {{doc.total_advance_amount or \"NO\" }}</td>\n  </tr>\n  <tr>\n    <td><b>LAYER PAYMENT IN SQFT</b></td>\n    <td>{{doc.total_layed_sqft}}</td>\n  </tr>\n  <tr>\n    <td><b>SITE STOCK</b></td>\n    <td>{% if doc.delivery_detail %}\n     {% set a=[] %}\n                    {% for i in doc.delivery_detail %} {% set _=a.append((i.delivered_stock_qty or 0)+(i.returned_stock_qty or 0)) %} {% endfor %}\n                    {{\"%.2f\"|format(((a|sum  -doc.total_layed_sqft)|int) )}}\n                    {% endif %}\n                    </td>\n  </tr>\n  </table>\n  \n    {% if doc.material_supply %}\n        <b><h3>Materials Supplied</h3></b>\n        <table style=\"width: 100%\">\n            <tr>\n                <th>\n                    Item\n                </th>\n                 <th>\n                    Qty\n                </th>\n            </tr>\n            {% for row in doc.raw_material %}\n                {% if (row.delivered_quantity + row.returned_quantity)>0 %}\n                    <tr>\n                        <td>\n                            {{ row.item }}\n                        </td>\n                        <td>\n                            {{ (row.delivered_quantity + row.returned_quantity) }}\n                        </td>\n                    </tr>\n                {% endif %} \n            {% endfor %}\n        </table>\n    {% endif %}\n    \n    {% if other_work|len > 0 %}\n        <b><h3>Other Work Description</h3></b>\n        <table style=\"width: 100%\">\n            <tr>\n                <th>\n                    Job Worker\n                </th>\n                <th>\n                    Start Date\n                </th>\n                <th>\n                    Description\n                </th>\n            </tr>\n            {% for row in doc.job_worker %}\n                <tr>\n                    {% if row.other_work %}\n                        <td>\n                            {{ row.employee_name }}\n                        </td>\n                        <td>\n                            {{ frappe.utils.formatdate(row.start_date) }}\n                        </td>\n                        <td>\n                            {{ row.description_for_other_work or \"-\" }}\n                        </td>\n                    {% endif %}\n                </tr>\n            {% endfor %}\n        </table>\n    {% endif %}\n    </div>\n \n<!--</div>-->\n\n</body>\n</html>\n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2023-02-24 09:49:29.214334",
 "modified_by": "Administrator",
 "module": "Ganapathy Pavers",
 "name": "Site Completion",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}