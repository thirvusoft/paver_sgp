{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-02-14 19:12:42.354736",
 "css": "\n.table, th, td {\n  border: 1px solid black;\n}\ntd {\n    font-weight: bold;\n}\n.td {\n  padding: 5px;\n  border: 1px solid black;\n  text-align: left;    \n}\n\n.signature {\n    width: 100%;\n    margin-top: 10px;\n}\n\n.signature td {\n    text-align: center;\n    font-weight: bold;\n    border-top: 1px solid black;\n    padding-top: 50px !important;\n}",
 "custom_format": 1,
 "default_print_language": "en-US",
 "disabled": 0,
 "doc_type": "Project",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "{% set other_work=[] %}\n<html>\n<head>\n\n<!--<div class=\"ex1\">-->\n<table style=\"width:100%;\">\n    <tr>\n         <td  colspan=\"2\" align=\"center\" style=\"background-color: #D6EEEE; font-size: 125%\"><b>{{ (doc.type or \"\").upper() }} - SITE COMPLETION REPORT </b><br></td>\n    </tr>\n     \n     <tr>\n         <td colspan=\"2\" style=\"border-bottom:1px solid; font-size: 125%\" align=\"center\"><b>{{doc.name}}</b><br></td>\n    </tr>\n \n      </table>\n      <div><br></div>\n      <div>\n          <table  style=\"width:100%\">\n            <tr>\n                <td style=\"width:50%\"><b>DATE: </b>{{ frappe.utils.formatdate(doc.completion_date) }}</td>\n                <td style=\"width:50%\"><b>ORDER SHEET NO: </b> \n                    {% set order_no = [] %}\n                    {% if doc.type==\"Compound Wall\" %}\n                        {% for i in doc.item_details_compound_wall %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                                <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                     {% set order_no = [] %}\n                    {% if doc.type==\"Pavers\" %}\n                        {% for i in doc.item_details %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                               <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                </td>\n           </tr>\n           <tr>\n             <td style=\"width:50%\"><b>RATE:{% if doc.type==\"Compound Wall\" %}\n              {% set a=[] %}\n                            {% for i in doc.item_details_compound_wall %} \n                           {% set _=a.append(i.rate or 0) %} {% endfor %}\n                           {% if (a|length)>0 %}\n                            {{\"%.2f\"|format((a|sum) /(a|length))}}\n                            {% endif %}\n                            {% endif %}\n                             {% if doc.type==\"Pavers\" %}\n                             {% set a=[] %}\n                            {% for i in doc.item_details %}{% set _=a.append(i.rate or 0) %} {% endfor %}\n                            {% if (a|length)>0 %}\n                                {{\"%.2f\"|format((a|sum) /(a|length))}} \n                            {% endif %}\n                            {% endif %}</b></td>\n              \n             <td style=\"width:50%\"><b>SITE SUPERVISOR: {{doc.supervisor_name}} </b></td>\n            \n          </tr>\n  <tr>\n   <td style=\"width:50%\"><b>LAYER NAME: {% set a=[] %}\n    {% for name in doc.job_worker|unique(attribute='employee_name') %}\n        {% if (a|len > 0) %}\n            {{\", \"}}\n        {% endif %}\n        <span style=\"font-size: 120%;\">{{ name.employee_name or \"\"}}</span>\n        {% set _=a.append(name.employee_name) %}\n    {% endfor %}\n</b></td>\n     <td style=\"width:50%\"><b>LAYER RATE: {% if doc.job_worker %}\n        {% set a=[] %}\n            {% for i in doc.job_worker %}\n                {% if (i.rate or 0) not in a %}\n                    {% if (a|len > 0) %} {{\", \"}} {% endif %}\n                    {{ \"%.2f\"%(i.rate or 0) }}\n                    {% set _=a.append(i.rate or 0) %}\n                {% endif %}\n            {% endfor %}\n        {% endif %}\n    </b></td>\n  </tr>\n  </table>\n      </div>\n       <div><br></div>\n       <div>\n          <table  style=\"width:100%\"><tr>\n             <td><b>DESIGN</b></td>\n    <td>   {% if doc.type==\"Compound Wall\" %}\n                    {% for name in doc.item_details_compound_wall|unique(attribute='item') %} {{name.item or \"\"}}, {% endfor %}\n                    {% endif %}\n                     {% if doc.type==\"Pavers\" %}\n                   {% for name in doc.item_details|unique(attribute='item') %}  {{name.item or \"\"}}, {% endfor %}\n                    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>SUPPLIED SQFT</b></td>\n    <td> {% if doc.delivery_detail %}\n     {% set a=[] %}\n                    {% for i in doc.delivery_detail %} {% set _=a.append((i.delivered_stock_qty or 0)+(i.returned_stock_qty or 0)) %} {% endfor %}\n                    {{\"%.2f\"|format((a|sum) )}} SQFT\n                    {% endif %} </td>\n  </tr>\n\n  {% if doc.type == \"Compound Wall\" %}\n    <tr>\n        <td>\n            <b>EARTH FOUNDATION</b>\n        </td>\n        <td>\n            {{ doc.earth_foundation_sqft or 0.00 }}\n        </td>\n    </tr>\n  {% endif %}\n  <tr>\n   <td><b>COMPLETED AREA IN SQFT</b></td>\n    <td> {{doc.measurement_sqft}} SQFT </td>\n  </tr>\n  <tr>\n    <td><b>MATERIAL SUPPLY IF ANY</b></td>\n    <td>{% if doc.material_supply ==1 %}\n    YES\n    {% endif %}\n    {% if doc.material_supply ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n    <tr>\n    <td><b>WORK COMPLETD</b></td>\n    <td>{% if doc.work_completed ==1 %}\n    YES\n    {% endif %}\n    {% if doc.work_completed ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>CUTTING PIECE</b></td>\n    <td>{% if doc.cutting_piece ==1 %}\n    YES\n    {% endif %}\n    {% if doc.cutting_piece ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n    {% if doc.type!=\"Compound Wall\" %}\n        <tr>\n        <td><b>DUST SEWING</b></td>\n        <td>{% if doc.dust_swing ==1 %}\n        YES\n        {% endif %}\n        {% if doc.dust_swing ==0 %}\n        NO\n        {% endif %}</td>\n      </tr>\n  {% endif %}\n  {% if doc.type!=\"Compound Wall\" %}\n      <tr>\n        <td><b>DUST FINISHING WITH EARTH RAMMER</b></td>\n        <td>{% if doc.dust_finishing_with_rammer ==1 %}\n        YES\n        {% endif %}\n        {% if doc.dust_finishing_with_rammer ==0 %}\n        NO\n        {% endif %}</td>\n      </tr>\n  {% endif %}\n  {% if doc.type!=\"Compound Wall\" %}\n    <tr>\n    <td><b>DUST SWEEPING</b></td>\n    <td>{% if doc.dust_sweeping ==1 %}\n    YES\n    {% endif %}\n    {% if doc.dust_sweeping ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  {% endif %}\n    <tr>\n    <td><b>ANY FOOD EXP IN SITE</b></td>\n    <td>{% if doc.any_food_exp_in_site ==1 %}\n    {{ doc.food_expense_amt or \"YES\" }}\n    {% endif %}\n    {% if doc.any_food_exp_in_site ==0 %}\n    NO\n    {% endif %}</td>\n  </tr>\n  <tr>\n    <td><b>OTHER LABOUR WORK IF ANY</b></td>\n    <td> \n    {% set other_work=[] %}\n    {% for i in doc.job_worker %} \n        {% if (i.other_work) %}\n            {% set _=other_work.append(i) %}\n        {% endif %}\n    {% endfor %}\n\n                    {% if ((other_work|len)>0) %}\n                    YES\n                   {% else %}\n                NO\n                    {% endif %}</td>\n  </tr>  <tr>\n    <td><b>SITE ADVANCE</b></td>\n    <td> {{doc.total_advance_amount or \"NO\" }}</td>\n  </tr>\n  <tr>\n    <td><b>LAYER PAYMENT IN SQFT</b></td>\n    <td>{{ (doc.total_layed_sqft or 0) | int}}  SQFT</td>\n  </tr>\n    <tr>\n      <td><b>SCRAP RETURN</b></td>\n      <td>{{ doc.returned_scrap_qty }} SQFT</td>\n  </tr>\n  <tr>\n    <td><b style=\"font-size: 120%\">SITE STOCK</b></td>\n    <td>\n        <b style=\"font-size: 120%\">{{ doc.site_stock or 'NIL' }}</b>\n    </td>\n  </tr>\n  </table>\n  \n    {% if doc.material_supply %}\n        <b><h3>Materials Supplied</h3></b>\n        <table style=\"width: 100%\">\n            <tr>\n                <th>\n                    Item\n                </th>\n                 <th>\n                    Qty\n                </th>\n                <th>\n                    Rate\n                </th>\n                 <th>\n                    Amount\n                </th>\n            </tr>\n            {% set delivered_details=site_completion_delivery_uom(doc.name) %}\n            {% for row in delivered_details %}\n                <tr>\n                    <td>\n                        {{ row }}\n                    </td>\n                    <td>\n                        {% set comma=[] %}\n                        {% for del_det in delivered_details[row] %}\n                            {% if comma|len > 0%}{{\", \"}}{% endif %}{{ del_det.qty }} {{ del_det.uom }}\n                            {% set _= comma.append(1) %}\n                        {% endfor %}\n                        \n                    </td>\n                    <td>\n                        {% set comma=[] %}\n                        {% for del_det in delivered_details[row] %}\n                            {% if comma|len > 0%}{{\", \"}}{% endif %}{{ del_det.valuation_rate }}/{{ del_det.uom }}\n                            {% set _= comma.append(1) %}\n                        {% endfor %}\n                    </td>\n                    <td>\n                        {% set total_rate = [] %}\n                        {% for del_det in delivered_details[row] %}\n                            {% set _= total_rate.append(del_det.qty * del_det.valuation_rate) %}\n                        {% endfor %}\n                        {{ total_rate|sum }}\n                    </td>\n                </tr>\n            {% endfor %}\n        </table>\n    {% endif %}\n    \n    {% if other_work|len > 0 %}\n        <b><h3>Other Work Description</h3></b>\n        <table style=\"width: 100%\">\n            <tr>\n                <th>\n                    Job Worker\n                </th>\n                <th>\n                    Start Date\n                </th>\n                <th>\n                    Description\n                </th>\n                <th>\n                    Sqft/Person\n                </th>\n                <th>\n                    Rate\n                </th>\n                <th>\n                    Amount\n                </th>\n            </tr>\n            {% for row in doc.job_worker %}\n                <tr>\n                    {% if row.other_work %}\n                        <td>\n                            {{ row.employee_name }}\n                        </td>\n                        <td>\n                            {{ frappe.utils.formatdate(row.start_date) }}\n                        </td>\n                        <td>\n                            {{ row.description_for_other_work or \"-\" }}\n                        </td>\n                        <td>\n                            {% if row.amount_calc_by_person %}\n                                {{ row.no_of_person or 0 }} Person\n                            {% else %}\n                                {{ row.sqft_allocated or 0 }} Sqft\n                            {% endif %}\n                        </td>\n                        <td>\n                            {% if row.amount_calc_by_person %}\n                                {{ row.rate_person or 0 }}\n                            {% else %}\n                                {{ row.rate or 0 }}\n                            {% endif %}\n                        </td>\n                        <td>\n                            {{ row.amount or 0 }}\n                        </td>\n                    {% endif %}\n                </tr>\n            {% endfor %}\n        </table>\n    {% endif %}\n    </div>\n    {% if doc.remarks %}\n        <div style=\"width: 100%; font-size: 130%\">\n            <b><h3>Remarks</h3> {{ doc.remarks }}</b>\n        </div>\n    {% endif %}\n    <table class=\"signature\">\n        <tr>\n            <td>\n                Signature of SUPERVISOR\n            </td>\n            <td>\n                Signature of MANAGING DIRECTOR\n            </td>\n        </tr>\n    </table>\n<!--</div>-->\n<div class=\"page-break\"></div>\n<div>\n    <table style=\"width:100%;\">\n    <tr>\n         <td  colspan=\"2\" align=\"center\" style=\"background-color: #D6EEEE; font-size: 125%\"><b>{{ (doc.type or \"\").upper() }} - SITE COMPLETION REPORT </b><br></td>\n    </tr>\n     \n     <tr>\n         <td colspan=\"2\" style=\"border-bottom:1px solid; font-size: 125%\" align=\"center\"><b>{{doc.name}}</b><br></td>\n    </tr>\n \n      </table>\n      <div><br></div>\n      <div>\n          <table  style=\"width:100%\">\n            <tr>\n                <td style=\"width:50%\"><b>DATE: </b>{{ frappe.utils.formatdate(doc.completion_date) }}</td>\n                <td style=\"width:50%\"><b>ORDER SHEET NO: </b> \n                    {% set order_no = [] %}\n                    {% if doc.type==\"Compound Wall\" %}\n                        {% for i in doc.item_details_compound_wall %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                                <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                     {% set order_no = [] %}\n                    {% if doc.type==\"Pavers\" %}\n                        {% for i in doc.item_details %}\n                            {% if (i.sales_order and i.sales_order not in order_no) %}\n                                {% if (order_no|len > 0) %}\n                                    {{\", \"}}\n                                {% endif %}\n                               <nobr>{{i.sales_order}} / {{ frappe.utils.formatdate(frappe.db.get_value(\"Sales Order\", i.sales_order, \"transaction_date\")) }}</nobr>\n                                {% set _=order_no.append(i.sales_order) %}\n                            {% endif %}\n                        {% endfor %}\n                    {% endif %}\n                </td>\n           </tr>\n           <tr>\n             <td style=\"width:50%\"><b>RATE:{% if doc.type==\"Compound Wall\" %}\n              {% set a=[] %}\n                            {% for i in doc.item_details_compound_wall %} \n                           {% set _=a.append(i.rate or 0) %} {% endfor %}\n                           {% if (a|length)>0 %}\n                            {{\"%.2f\"|format((a|sum) /(a|length))}}\n                            {% endif %}\n                            {% endif %}\n                             {% if doc.type==\"Pavers\" %}\n                             {% set a=[] %}\n                            {% for i in doc.item_details %}{% set _=a.append(i.rate or 0) %} {% endfor %}\n                            {% if (a|length)>0 %}\n                                {{\"%.2f\"|format((a|sum) /(a|length))}} \n                            {% endif %}\n                            {% endif %}</b></td>\n              \n             <td style=\"width:50%\"><b>SITE SUPERVISOR: {{doc.supervisor_name}} </b></td>\n            \n          </tr>\n  <tr>\n   <td style=\"width:50%\"><b>LAYER NAME: {% set a=[] %}\n    {% for name in doc.job_worker|unique(attribute='employee_name') %}\n        {% if (a|len > 0) %}\n            {{\", \"}}\n        {% endif %}\n        <span style=\"font-size: 120%;\">{{ name.employee_name or \"\"}}</span>\n        {% set _=a.append(name.employee_name) %}\n    {% endfor %}\n</b></td>\n     <td style=\"width:50%\"><b>LAYER RATE: {% if doc.job_worker %}\n        {% set a=[] %}\n            {% for i in doc.job_worker %}\n                {% if (i.rate or 0) not in a %}\n                    {% if (a|len > 0) %} {{\", \"}} {% endif %}\n                    {{ \"%.2f\"%(i.rate or 0) }}\n                    {% set _=a.append(i.rate or 0) %}\n                {% endif %}\n            {% endfor %}\n        {% endif %}\n    </b></td>\n  </tr>\n  </table>\n      </div>\n       <div><br></div>\n    <div><br></div>\n       <div>\n           <table  style=\"width:100%\">\n               <tr>\n                   <td><b>Invoiced Amount</b></td>\n                   <td>{{ doc.get_formatted(\"total_expense_amount\") }}</td>\n               </tr>\n               <tr>\n                   <td><b>Actual Site Cost</b></td>\n                   <td>{{ doc.get_formatted(\"actual_site_cost_calculation\") }}</td>\n               </tr>\n               <tr>\n                   <td><b>Site Profit Amount</b></td>\n                   <td>{{ doc.get_formatted(\"site_profit_amount\") }}</td>\n               </tr>\n           </table>\n       </div>\n</div>\n</body>\n</html>\n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2023-05-03 13:02:24.375039",
 "modified_by": "Administrator",
 "module": "Ganapathy Pavers",
 "name": "Site Completion",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}